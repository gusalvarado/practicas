# SonarQube Configuration for DataFlow Analytics
# Optimized for microservices architecture with high security standards

# Project Information
sonar.projectKey=dataflow-analytics
sonar.projectName=DataFlow Analytics Platform
sonar.projectVersion=2.1.0
sonar.organization=dataflow-org

# Source Code Configuration
sonar.sources=src,microservices
sonar.tests=tests,spec,__tests__
sonar.test.inclusions=**/*.test.js,**/*.spec.js,**/*test*.js
sonar.sourceEncoding=UTF-8

# Language Configuration
sonar.javascript.lcov.reportPaths=coverage/lcov.info
sonar.typescript.lcov.reportPaths=coverage/lcov.info
sonar.nodejs.executable=node

# Quality Gates - Strict Configuration for Financial/Data Systems
sonar.qualitygate.wait=true

# Coverage Requirements
sonar.coverage.exclusions=**/node_modules/**,**/tests/**,**/*.config.js,**/*.test.js
sonar.test.exclusions=**/node_modules/**,**/build/**,**/dist/**

# Security Configuration - Enhanced for Financial Compliance
sonar.security.hotspots.inheritedFromParent=true

# Code Smells Configuration
sonar.issue.ignore.multicriteria=e1,e2,e3,e4,e5

# Ignore certain rules for legacy code during transition
sonar.issue.ignore.multicriteria.e1.ruleKey=javascript:S1481
sonar.issue.ignore.multicriteria.e1.resourceKey=**/legacy/**

# Ignore console.log in development files only
sonar.issue.ignore.multicriteria.e2.ruleKey=javascript:S2039
sonar.issue.ignore.multicriteria.e2.resourceKey=**/dev/**,**/development/**

# Ignore complexity warnings for specific utility files
sonar.issue.ignore.multicriteria.e3.ruleKey=javascript:S3776
sonar.issue.ignore.multicriteria.e3.resourceKey=**/utils/complex-algorithms.js

# Ignore duplicate strings in configuration files
sonar.issue.ignore.multicriteria.e4.ruleKey=javascript:S1192
sonar.issue.ignore.multicriteria.e4.resourceKey=**/config/**

# Ignore TODO comments in development branch
sonar.issue.ignore.multicriteria.e5.ruleKey=javascript:S1135
sonar.issue.ignore.multicriteria.e5.resourceKey=**/dev/**

# Microservices-Specific Configuration
sonar.modules=auth-service,data-processor,notification-service,sync-engine,monitoring-service,api-gateway

# Auth Service Configuration
auth-service.sonar.projectName=Authentication Service
auth-service.sonar.sources=auth-service/src
auth-service.sonar.tests=auth-service/tests
auth-service.sonar.javascript.lcov.reportPaths=auth-service/coverage/lcov.info

# Data Processor Configuration
data-processor.sonar.projectName=Data Processing Engine
data-processor.sonar.sources=data-processor/src
data-processor.sonar.tests=data-processor/tests
data-processor.sonar.javascript.lcov.reportPaths=data-processor/coverage/lcov.info

# Notification Service Configuration
notification-service.sonar.projectName=Notification Service
notification-service.sonar.sources=notification-service/src
notification-service.sonar.tests=notification-service/tests
notification-service.sonar.javascript.lcov.reportPaths=notification-service/coverage/lcov.info

# Sync Engine Configuration
sync-engine.sonar.projectName=Data Synchronization Engine
sync-engine.sonar.sources=sync-engine/src
sync-engine.sonar.tests=sync-engine/tests
sync-engine.sonar.javascript.lcov.reportPaths=sync-engine/coverage/lcov.info

# Monitoring Service Configuration
monitoring-service.sonar.projectName=System Monitoring Service
monitoring-service.sonar.sources=monitoring-service/src
monitoring-service.sonar.tests=monitoring-service/tests
monitoring-service.sonar.javascript.lcov.reportPaths=monitoring-service/coverage/lcov.info

# API Gateway Configuration
api-gateway.sonar.projectName=API Gateway
api-gateway.sonar.sources=api-gateway/src
api-gateway.sonar.tests=api-gateway/tests
api-gateway.sonar.javascript.lcov.reportPaths=api-gateway/coverage/lcov.info

# Exclusions for Generated Code
sonar.exclusions=**/node_modules/**,**/dist/**,**/build/**,**/coverage/**,**/*.min.js,**/generated/**,**/vendor/**

# Include specific patterns for analysis
sonar.inclusions=**/*.js,**/*.ts,**/*.jsx,**/*.tsx

# Duplicate Detection Configuration
sonar.cpd.exclusions=**/tests/**,**/*.test.js,**/*.spec.js
sonar.cpd.js.minimumTokens=50
sonar.cpd.js.minimumLines=10

# Security Rules - Enhanced for Data Processing Systems
# Focus on SQL injection, XSS, CSRF, and data exposure vulnerabilities

# Custom Quality Profile for Data Systems
sonar.profile=DataFlow Security Profile

# Branch Analysis Configuration (for CI/CD)
sonar.branch.name=${CI_COMMIT_REF_NAME}
sonar.branch.target=main

# Pull Request Analysis
sonar.pullrequest.key=${CI_MERGE_REQUEST_IID}
sonar.pullrequest.branch=${CI_MERGE_REQUEST_SOURCE_BRANCH_NAME}
sonar.pullrequest.base=${CI_MERGE_REQUEST_TARGET_BRANCH_NAME}

# Scanner Configuration
sonar.scm.provider=git
sonar.scm.forceReloadAll=true

# Performance Configuration
sonar.scanner.metadataFilePath=.scannerwork/report-task.txt

# Additional Analysis Parameters
sonar.analysis.mode=publish
sonar.buildString=${BUILD_NUMBER}
sonar.links.homepage=https://dataflow-analytics.com
sonar.links.ci=https://ci.dataflow-analytics.com
sonar.links.issue=https://jira.dataflow-analytics.com
sonar.links.scm=https://github.com/dataflow-analytics/platform

# Custom Metrics
sonar.javascript.environments=node,browser,es6
sonar.typescript.node.maxspace=4096

# Rule Severity Overrides for Data Processing Context
# Critical: Security vulnerabilities, SQL injection, data exposure
# Major: Performance issues, memory leaks, resource management
# Minor: Code style, naming conventions, documentation

# Reporting Configuration
sonar.issuesReport.html.enable=true
sonar.issuesReport.console.enable=true
sonar.working.directory=.scannerwork

# Integration with External Tools
sonar.eslint.reportPaths=reports/eslint-report.json
sonar.javascript.jstestdriver.reportPath=reports/jsunit.xml

# Webhook Configuration for CI/CD Integration
sonar.webhooks.global=https://ci.dataflow-analytics.com/sonar-webhook
